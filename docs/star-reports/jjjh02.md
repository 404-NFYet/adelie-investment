# 허진서 — 프로젝트 기여 보고서 (STAR)

> 역할: 백엔드 (FastAPI 인증, DB)
> 기간: 2026년 2월
> 기술 스택: FastAPI, Spring Boot, JWT, PostgreSQL, Alembic, Neo4j, LangChain

---

## Situation (상황)

- Adelie Investment 플랫폼은 사용자 인증 시스템이 전무한 상태에서 출발하였으며, 회원 관리와 보안 인증 체계를 처음부터 설계하고 구현해야 했다.
- 초기에는 Spring Boot 기반 인증 서버를 별도로 운영하였으나, 서비스 복잡도 증가와 유지보수 부담으로 인해 FastAPI 단일 백엔드로의 통합이 필요한 상황이었다.
- 데이터베이스 마이그레이션 체계가 불안정하여 개발 환경과 운영 환경 간의 스키마 불일치 문제가 빈번하게 발생하고 있었다.
- AI 챗봇의 교육 기능을 확장하기 위해 종목 비교, 용어 하이라이팅 등의 백엔드 도구가 추가로 필요하였다.

## Task (과제)

- JWT 기반 사용자 인증/인가 시스템 설계 및 구현
- Spring Boot 인증 서버에서 FastAPI 통합 백엔드로의 인증 모듈 마이그레이션
- 데이터베이스 마이그레이션 안정화 및 개발 워크플로우 정립
- Neo4j 기반 종목 데이터 배치 적재 시스템 구축
- AI 챗봇 도구(종목 비교, 용어 하이라이팅) 구현

## Action (행동)

### 주요 구현 사항

#### 인증 시스템 구축 및 마이그레이션

- **Spring Security + JWT 기반 회원 인증 시스템 구현**: 프로젝트 초기 단계에서 Spring Boot 기반의 인증 전용 서버를 구축하였다.
  - Spring Security를 활용한 JWT 토큰 발급/검증 로직
  - 회원 가입/로그인 API 설계 및 구현
  - 비밀번호 암호화(BCrypt) 적용
  - CORS 정책 설정 및 보안 필터 체인 구성
- **Spring Boot 인증 전용 축소 및 FastAPI 통합**: 서비스 아키텍처 단순화를 위해 Spring Boot 인증 서버의 기능을 FastAPI로 완전 마이그레이션하였다.
  - JWT 서명/검증 로직을 Python PyJWT로 재구현
  - 사용자 CRUD 엔드포인트 재작성
  - 토큰 리프레시 메커니즘 구현
  - 기존 API 인터페이스 호환성 유지 (nginx rewrite로 레거시 경로 지원)
- **JWT 서명 알고리즘 불일치 수정 (HS384 → HS256)**: Spring Boot에서 FastAPI로 전환하는 과정에서 발생한 JWT 서명 알고리즘 불일치 문제를 발견하고 수정하였다.
  - HS384로 서명된 기존 토큰과의 호환성을 고려한 마이그레이션 전략 수립
  - HS256으로 통일하여 프론트엔드-백엔드 간 토큰 검증 안정화
- **Spring Security CORS 환경변수 동적 설정**: Spring Boot 운영 시절 CORS 허용 도메인을 환경변수로 동적 설정할 수 있도록 개선하였다.
  - 개발/스테이징/운영 환경별 CORS 정책의 유연한 관리

#### 데이터베이스 및 마이그레이션

- **개발용 마이그레이션 안정화 및 db-migrate 추가**: Alembic 마이그레이션의 개발 환경 안정성을 확보하였다.
  - Docker Compose에 `db-migrate` 서비스를 추가
  - 컨테이너 기반 마이그레이션 실행 워크플로우 정립
  - 로컬/Docker/원격 서버 각 환경에서의 마이그레이션 표준화
- **Neo4j 배치 적재 스크립트 및 OpenDART 추출 자동화**: 금융 데이터 기반 그래프 데이터베이스를 구축하였다.
  - 금융감독원 OpenDART API를 통한 기업 공시 데이터 추출 자동화
  - Neo4j 그래프 데이터베이스에 종목 관계 데이터 배치 적재 스크립트 작성
  - 종목 간 업종/테마/공급망 관계 모델링

#### AI 챗봇 도구 개발

- **종목 비교 도구 구현**: AI 튜터 챗봇에서 사용할 수 있는 종목 비교 도구(LangChain Tool)를 구현하였다.
  - 두 종목의 재무 지표, 주가 추이, 업종 내 위치 등을 비교 분석
  - 교육적 인사이트를 포함한 비교 결과 생성
- **용어 하이라이팅 서비스 추가**: 내러티브 텍스트 내의 금융 전문 용어를 자동으로 감지하고 하이라이팅하는 서비스(`term_highlighter.py`)를 구현하였다.
  - 용어 사전 기반 자동 감지 로직
  - 초보 투자자를 위한 즉시 용어 확인 기능 제공

### 기술적 의사결정

- **Spring Boot → FastAPI 통합 결정**: 두 개의 백엔드 서비스를 운영하면 인프라 비용과 유지보수 복잡도가 증가하므로, FastAPI 단일 백엔드로 통합하는 아키텍처를 채택하였다. 배포 파이프라인이 단순화되고 서비스 간 통신 오버헤드가 제거되었다.
- **HS256 알고리즘 표준화**: JWT 서명 알고리즘을 HS256으로 통일하여 Python PyJWT 라이브러리와의 호환성을 확보하고, 토큰 검증 로직을 단순화하였다.
- **Alembic + Docker Compose 마이그레이션 전략**: 로컬, Docker, 원격 서버 각 환경에서 일관된 마이그레이션을 수행할 수 있도록 `db-migrate` 서비스를 설계하여 환경별 마이그레이션 실행 방법을 표준화하였다.
- **Neo4j 그래프 DB 활용**: 종목 간 관계(업종, 테마, 공급망 등)를 표현하기 위해 관계형 DB 외에 Neo4j 그래프 데이터베이스를 도입하여, 종목 비교 및 관련 종목 탐색 기능의 기반을 마련하였다.

## Result (결과)

### 정량적 성과

| 지표 | 수치 |
|------|------|
| 커밋 수 | 11개 |
| 코드 변경량 | +2,669 / -1,403 라인 |
| 활동일 수 | 4일 |
| 인증 시스템 구현 | 2회 (Spring Boot 구축 + FastAPI 마이그레이션) |

### 정성적 성과

- Spring Boot에서 FastAPI로의 인증 시스템 마이그레이션을 성공적으로 수행하여 백엔드 아키텍처를 단일 서비스로 통합하였다. 이를 통해 배포 복잡도가 크게 감소하였다.
- JWT 알고리즘 불일치와 같은 보안 관련 이슈를 조기에 발견하고 수정하여, 인증 시스템의 안정성을 확보하였다.
- 마이그레이션 워크플로우를 표준화하여 팀 전체의 데이터베이스 작업 생산성을 향상시켰다.
- 종목 비교 도구와 용어 하이라이팅 서비스를 통해 AI 튜터의 교육적 기능을 확장하였다.
- Neo4j 그래프 DB 도입으로 종목 관계 분석이라는 새로운 기능 확장의 기반을 구축하였다.
