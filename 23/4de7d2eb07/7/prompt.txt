Implement the following plan:

# ëª¨ì˜íˆ¬ì 404 ìˆ˜ì • + ë¬¸ì˜ì‚¬í•­ ì €ì¥/ëŒ€ì‹œë³´ë“œ í‘œì‹œ

## Context

**3ê°œì˜ ë…ë¦½ì ì¸ ë²„ê·¸:**

1. **ëª¨ì˜íˆ¬ì í˜ì´ì§€ 404** (ìµœìš°ì„ ): ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ `GET /api/v1/portfolio 404 Not Found` í™•ì¸.
   - ì›ì¸: `pykrx` íŒ¨í‚¤ì§€ê°€ `fastapi/requirements.txt`ì— ëˆ„ë½ â†’ ì»¨í…Œì´ë„ˆì— ë¯¸ì„¤ì¹˜
   - â†’ `stock_price_service.py`ê°€ `from pykrx import stock`ìœ¼ë¡œ top-level import
   - â†’ `portfolio.py`ê°€ `stock_price_service`ë¥¼ import
   - â†’ main.pyì˜ graceful import ì‹¤íŒ¨ë¡œ `/api/v1/portfolio/*` ë¼ìš°í„° ì „ì²´ ë¯¸ë“±ë¡ â†’ 404

2. **ë¬¸ì˜ì‚¬í•­ ì €ì¥ ë¯¸í™•ì¸**: `Profile.jsx` ContactSectionì´ `fetch()` ì‘ë‹µì—ì„œ `response.ok` ë¯¸ì²´í¬
   - â†’ ì„œë²„ 500/422 ì‘ë‹µë„ "ì„±ê³µ"ìœ¼ë¡œ ì²˜ë¦¬í•´ "ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!" í‘œì‹œí•˜ì§€ë§Œ DB ë¯¸ì €ì¥ ê°€ëŠ¥

3. **ëŒ€ì‹œë³´ë“œ ë¬¸ì˜ì‚¬í•­ ì‹ë³„ ì–´ë ¤ì›€**: `user_feedback(page='contact')` í•­ëª©ì´ ì¼ë°˜ í”¼ë“œë°±ê³¼ ì„ì—¬ ìˆì–´
   - ëŒ€ì‹œë³´ë“œì—ì„œ ë¬¸ì˜ì‚¬í•­ë§Œ ë¹ ë¥´ê²Œ í™•ì¸í•˜ëŠ” ì „ìš© ë·° ë¶€ì¬

---

## ìˆ˜ì • 1: pykrx ì¶”ê°€ â€” `fastapi/requirements.txt`

**ë‹´ë‹¹**: dorae222 (ì¸í”„ë¼/Docker, í˜„ì¬ git config)

```diff
 # Database drivers
 pgvector==0.3.6
+
+# í•œêµ­ ì£¼ì‹ ì‹œì¥ ë°ì´í„°
+pykrx>=1.0.0
```

ì¶”ê°€ ìœ„ì¹˜: requirements.txt í•˜ë‹¨.

> datapipeline/requirements.txtì—ì„œ `pykrx>=1.0.0`ìœ¼ë¡œ ì´ë¯¸ ì‚¬ìš© ì¤‘ â€” ë™ì¼ ë²„ì „ ì ìš©.

---

## ìˆ˜ì • 2: pykrx import ë°©ì–´ â€” `fastapi/app/services/stock_price_service.py` (line 9)

top-level import ì‹¤íŒ¨ ì‹œ ë¼ìš°íŠ¸ ì „ì²´ê°€ ë¯¸ë“±ë¡ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ë°©ì–´ ì½”ë“œ ì¶”ê°€.

```python
# Before
from pykrx import stock

# After
try:
    from pykrx import stock as _pykrx_stock
    HAS_PYKRX = True
except ImportError:
    _pykrx_stock = None
    HAS_PYKRX = False
    logger.warning("pykrx ë¯¸ì„¤ì¹˜ â€” ì£¼ê°€ ì¡°íšŒ ì‹œ KIS ì „ìš© ëª¨ë“œë¡œ ë™ì‘")
```

`_fetch_price_sync` í•¨ìˆ˜ ë‚´ì—ì„œ `stock` â†’ `_pykrx_stock` ì¹˜í™˜ + `HAS_PYKRX` ê°€ë“œ ì¶”ê°€:
```python
def _fetch_price_sync(stock_code: str) -> Optional[dict]:
    if not HAS_PYKRX:
        return None
    # ê¸°ì¡´ ë¡œì§ (stock â†’ _pykrx_stock ìœ¼ë¡œ êµì²´)
    ...
```

---

## ìˆ˜ì • 3: ë¬¸ì˜ì‚¬í•­ ì—ëŸ¬ í•¸ë“¤ë§ â€” `frontend/src/pages/Profile.jsx` (lines 13-28)

**ë‹´ë‹¹**: YJ99Son (í”„ë¡ íŠ¸ì—”ë“œ)

```javascript
// Before
const [submitted, setSubmitted] = useState(false);
...
try {
  await fetch('/api/v1/feedback', { method: 'POST', ... });
  setSubmitted(true);
} catch {}

// After
const [submitted, setSubmitted] = useState(false);
const [submitError, setSubmitError] = useState(false);
...
try {
  const res = await fetch('/api/v1/feedback', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ page: 'contact', rating: null, comment: message }),
  });
  if (!res.ok) throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${res.status}`);
  setSubmitted(true);
} catch {
  setSubmitError(true);
} finally {
  setSubmitting(false);
}
```

ì—ëŸ¬ UI (submit ë²„íŠ¼ ì•„ë˜ ì¶”ê°€):
```jsx
{submitError && (
  <p className="text-xs text-red-500 mt-2 text-center">
    ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.
  </p>
)}
```

> `setSubmitting(false)` ì¤‘ë³µ ì œê±°: try/catchì—ì„œ finallyë¡œ ì´ë™.

---

## ìˆ˜ì • 4: ëŒ€ì‹œë³´ë“œ ë¬¸ì˜ì‚¬í•­ ë·° â€” `infra/docker-dashboard/pages/feedback.py`

**ë‹´ë‹¹**: dorae222

`tab_general` ë¸”ë¡ ìƒë‹¨ì— ë¬¸ì˜ì‚¬í•­ ì „ìš© ì„¹ì…˜ ì¶”ê°€ (render_section_header ë’¤, ê¸°ì¡´ summary ì•):

```python
# ë¬¸ì˜ì‚¬í•­ ì „ìš© ì„¹ì…˜
st.subheader("ğŸ™‹ ë¬¸ì˜ì‚¬í•­")
try:
    contacts = _query("""
        SELECT
            id,
            to_char(created_at AT TIME ZONE 'Asia/Seoul', 'MM-DD HH24:MI') AS ì ‘ìˆ˜ì¼ì‹œ,
            COALESCE(user_id::text, 'ë¹„íšŒì›') AS ì‚¬ìš©ì,
            comment AS ë‚´ìš©
        FROM user_feedback
        WHERE page = 'contact'
        ORDER BY created_at DESC
        LIMIT 50
    """)
    if contacts.empty:
        st.info("ì ‘ìˆ˜ëœ ë¬¸ì˜ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.metric("ì´ ë¬¸ì˜ ìˆ˜", len(contacts))
        st.dataframe(contacts, use_container_width=True, hide_index=True)
        st.download_button(
            "ğŸ“¥ CSV ë‹¤ìš´ë¡œë“œ",
            contacts.to_csv(index=False).encode('utf-8-sig'),
            file_name=f"inquiries_{datetime.now().strftime('%Y%m%d')}.csv",
            mime="text/csv",
        )
except Exception as e:
    st.warning(f"ë¬¸ì˜ì‚¬í•­ ì¡°íšŒ ì‹¤íŒ¨: {e}")

st.divider()
```

---

## ìˆ˜ì • íŒŒì¼ ìš”ì•½

| íŒŒì¼ | ë³€ê²½ | ë‹´ë‹¹ì |
|------|------|--------|
| `fastapi/requirements.txt` | `pykrx>=1.0.0` ì¶”ê°€ | dorae222 |
| `fastapi/app/services/stock_price_service.py` | pykrx import ë°©ì–´ (try/except + HAS_PYKRX) | dorae222 |
| `frontend/src/pages/Profile.jsx` | ContactSection response.ok ì²´í¬ + ì—ëŸ¬ UI | YJ99Son |
| `infra/docker-dashboard/pages/feedback.py` | ë¬¸ì˜ì‚¬í•­ ì „ìš© ì„¹ì…˜ ì¶”ê°€ | dorae222 |

---

## ì»¤ë°‹ ê³„íš

1. **ë°±ì—”ë“œ í•«í”½ìŠ¤** (git: dorae222, ì¦‰ì‹œ ë¹Œë“œ/ë°°í¬ í•„ìš”)
   ```
   fix: pykrx ëˆ„ë½ìœ¼ë¡œ ì¸í•œ portfolio API 404 ìˆ˜ì •
   ```
   íŒŒì¼: `fastapi/requirements.txt`, `fastapi/app/services/stock_price_service.py`

2. **í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •** (git: YJ99Son / syjin2008@naver.com)
   ```
   fix: ë¬¸ì˜ì‚¬í•­ ì œì¶œ ì—ëŸ¬ í•¸ë“¤ë§ ì¶”ê°€
   ```
   íŒŒì¼: `frontend/src/pages/Profile.jsx`

3. **ëŒ€ì‹œë³´ë“œ ìˆ˜ì •** (git: dorae222)
   ```
   fix: ëŒ€ì‹œë³´ë“œ ë¬¸ì˜ì‚¬í•­ ì „ìš© ì„¹ì…˜ ì¶”ê°€
   ```
   íŒŒì¼: `infra/docker-dashboard/pages/feedback.py`

4. **ë¯¸ì™„ë£Œ push**: ì´ë¯¸ ì»¤ë°‹ëœ `630578c (docs: DB ìš´ì˜ ê°€ì´ë“œ)` â†’ push

---

## ë°°í¬ ìˆœì„œ

```bash
# 1. develop ë¸Œëœì¹˜ push (docs ì»¤ë°‹ í¬í•¨)
git push origin develop

# 2. backend-api ì´ë¯¸ì§€ ì¬ë¹Œë“œ & í‘¸ì‹œ (pykrx í¬í•¨)
make build-api && make push

# 3. deploy-test ì¬ë°°í¬
ssh deploy-test 'cd ~/adelie-investment && docker compose -f docker-compose.prod.yml pull backend-api && docker compose -f docker-compose.prod.yml up -d backend-api'

# 4. dashboard ì¬ë¹Œë“œ (ë¬¸ì˜ì‚¬í•­ ì„¹ì…˜ ë°˜ì˜)
ssh deploy-test 'cd ~/adelie-investment/infra/monitoring && docker compose up -d --build dashboard'
```

---

## ê²€ì¦

1. **Portfolio 404 ìˆ˜ì • í™•ì¸**:
   ```bash
   ssh deploy-test "docker exec adelie-backend-api python -c \"from app.api.routes import portfolio; print('OK', len(portfolio.router.routes))\""
   # ê¸°ëŒ€: OK 12
   curl -H "Authorization: Bearer <JWT>" https://demo.adelie-invest.com/api/v1/portfolio
   # ê¸°ëŒ€: 200 + portfolio data
   ```

2. **ë¬¸ì˜ì‚¬í•­ ì €ì¥ í™•ì¸**:
   Profile í˜ì´ì§€ â†’ ë¬¸ì˜ ì…ë ¥ â†’ ë³´ë‚´ê¸° â†’ "ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!" í™•ì¸ í›„:
   ```bash
   ssh deploy-test "docker exec adelie-postgres psql -U narative -d narrative_invest -c \"SELECT id, comment, created_at FROM user_feedback WHERE page='contact' ORDER BY created_at DESC LIMIT 3\""
   ```

3. **ëŒ€ì‹œë³´ë“œ í™•ì¸**: `dashboard.adelie-invest.com` â†’ í”¼ë“œë°± ê´€ë¦¬ â†’ "ë¬¸ì˜ì‚¬í•­" ì„¹ì…˜ì—ì„œ í•­ëª© ë…¸ì¶œ


If you need specific details from before exiting plan mode (like exact code snippets, error messages, or content you generated), read the full transcript at: /home/hj/.REDACTED.jsonl

---

ë°°í¬ì„œë²„ê¹Œì§€ ì—…ë°ì´íŠ¸ê°€ ì§„í–‰ë˜ì—ˆëŠ”ê°€? ì•„ë‹ˆë¼ë©´ ì§„í–‰í•´ë¼

---

frontendë„ ì§„í–‰í–ˆë‚˜?

---

ì•„ì§ ë¬¸ì˜ì‚¬í•­ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ë‹¤.